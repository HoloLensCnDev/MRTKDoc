<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Tap to Place | Mixed Reality Toolkit Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Tap to Place | Mixed Reality Toolkit Documentation ">
    <meta name="generator" content="docfx 2.47.0.0">
    
    <link rel="shortcut icon" href="../Documentation/Images/favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../Documentation/Images/mrt_logo_icon.png" alt="">
              </a>
            </div>
          
          <div class="version-dropdown" id="versionDropdown">
           </div>
         
          <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="tap-to-place">Tap to Place</h1>

<p><img src="Images/Solver/TapToPlace/TapToPlaceIntroGif.gif" alt="TapToPlace"></p>
<p>Tap to Place is a far interaction component that is used to place a game object on surface. This component is useful for placing objects on a spatial mesh. Tap to Place uses a combination of two clicks and head movement to place an object. A click to start the placement, head movement to control the position of the object and a click to place the object in the scene.</p>
<h2 id="using-tap-to-place">Using Tap to Place</h2>
<ol>
<li><p>Set up the scene</p>
<ul>
<li>Create a new unity scene</li>
<li>Add MRTK to the scene by navigating to the <strong>Mixed Reality Toolkit</strong> &gt; <strong>Add to Scene and Configure</strong></li>
</ul>
<div class="NOTE">
<h5>Note</h5>
<p>Tap to Place uses clicks driven by the MRTK Input System but it can also be controlled without clicks, see the Tap To Place Code Configurability section below.</p>
</div>
<ul>
<li>Add a cube to the scene and change the scale to 0.2 and change the position to (0, 0, 0.7).</li>
</ul>
</li>
<li><p>Attach <a class="xref" href="../api/Microsoft.MixedReality.Toolkit.Utilities.Solvers.TapToPlace.html">Tap to Place</a> to a game object with a collider</p>
<p><img src="Images/Solver/TapToPlace/TapToPlaceInspector2.png" alt="TapToPlaceInspector"></p>
<ul>
<li>When the Tap to Place component is added, a Solver Handler will also be attached. Tap to Place derives from the <a href="README_Solver.html">Solver</a> class which requires a Solver Handler. The position of a Tap to Place object is calculated relative to the <code>TrackedTargetType</code> within the Solver Handler. By default the Head is the <code>TrackedTargetType</code>, i.e. when the head moves, the object follows if it is selected.  The <code>TrackedTargetType</code> can also be set to Controller Ray which has the object follow the controller. The first group of properties in the Tap to Place inspector are the <a href="README_Solver.html#common-solver-properties">Common Solver Properties</a>.</li>
</ul>
<div class="IMPORTANT">
<h5>Important</h5>
<p>Tap to Place is a stand alone Solver and cannot be chained with other Solvers. It cannot be chained because SolverHandler.UpdateSolvers is used to update the object's position while it is being placed.</p>
</div>
<ul>
<li>Tap to Place Properties:
<ul>
<li><code>Auto Start</code>: If true, the Tap to Place solver will start out controlling the position of the game object to be placed. The object will immediately start following the TrackedTargetType (Head or Controller Ray). This value must be modified before Start() is invoked in order to have any effect.</li>
<li><code>Default Placement Distance</code>: The default distance (in meters) an object will be placed relative to the TrackedTargetType forward in the SolverHandler. The game object will be placed at the default placement distance if a surface is not hit by the raycast.</li>
<li><code>Max Raycast Distance</code>: The max distance (meters) for the raycast based on the 'TrackedTargetType' origin. This raycast looks for a surface to place a selected object.</li>
<li><code>Surface Normal Offset</code>: The distance between the center of the game object to place and a surface along the surface normal, if the raycast hits a surface. By default, the surface normal offset is 0 but after Start() the surface normal offset is set to the collider's extents along the z axis.</li>
<li><code>Keep Orientation Vertical</code>: If true, the game object to place will remain upright and in line with Vector3.up.</li>
<li><code>Rotate According to Surface</code>: If false, the game object to place will not change its rotation according to the surface hit.  The object will remain facing the camera while IsBeingPlaced is true.</li>
<li><code>Magnetic Surfaces</code>: An array of LayerMasks to execute from highest to lowest priority. First layer mask to provide a raycast hit will be used for position calculations.</li>
<li><code>Debug Enabled</code>: If true and in the Unity Editor, the normal of the raycast hit will be drawn in yellow. Debug enabled is useful when <code>RotateAccordingToSurface</code> is true because it draws the normal of the surface hit which visually explains why the object is set at its current orientation.</li>
<li><code>On Placing Started</code>: This event is triggered once when the game object to place is selected.</li>
<li><code>On Placing Stopped</code>: This event is triggered once when the game object to place is unselected, placed.</li>
</ul>
</li>
</ul>
</li>
<li><p>Testing Tap to Place behavior in editor</p>
<ul>
<li>Press play and hold the space bar to show an input simulation hand.</li>
<li>Move the hand until the cube is in focus and simulate a click with the input simulation hand by clicking with the left mouse.
<ul>
<li>If colliders are not present in the scene, the object will follow the <code>TrackedTargetType</code> at the defined <code>Default Placement Distance</code>.</li>
</ul>
</li>
<li>The object will follow the movement of the <code>TrackedTargetType</code> after selection. To simulate head movement in editor, press the WASD keys. Change head rotation by clicking and holding the right mouse.</li>
<li>To stop placing the object, click again.  The object does not need to be in focus for the stop placement click. Focus is only required for the initial click that starts the placement process.</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align: center;"><code>TrackedTargetType</code>: Head (Default)</th>
<th style="text-align: center;"><code>TrackedTargetType</code>: Controller Ray</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><img src="Images/Solver/TapToPlace/TapToPlaceInputSimulationHead.gif" alt="TapToPlaceInputSimulationHead"></td>
<td style="text-align: center;"><img src="Images/Solver/TapToPlace/TapToPlaceInputSimulationControllerRay.gif" alt="TapToPlaceInputSimulationControllerRay"></td>
</tr>
</tbody>
</table>
</li>
</ol>
<h2 id="tap-to-place-code-configurability">Tap to Place Code Configurability</h2>
<p>Tap to Place object selection timing can also be controlled via <code>StartPlacement()</code> and <code>StopPlacement()</code> instead of requiring a click event. This capability is useful for writing tests and provides an alternative method to place an object in editor without using the MRTK Input System.</p>
<ol>
<li><p>Create an empty game object</p>
</li>
<li><p>Create and attach the following example script to the empty game object</p>
<pre><code>using UnityEngine;
using Microsoft.MixedReality.Toolkit.Utilities.Solvers;

public class TapToPlaceInputExample : MonoBehaviour
{
    private GameObject cube;
    private TapToPlace tapToPlace;

    void Start()
    {
        cube = GameObject.CreatePrimitive(PrimitiveType.Cube);
        cube.transform.localScale = Vector3.one * 0.2f;
        cube.transform.position = Vector3.forward * 0.7f;

        tapToPlace = cube.AddComponent&lt;TapToPlace&gt;();
    }

    void Update()
    {
        if (Input.GetKeyDown(KeyCode.U))
        {
            tapToPlace.StartPlacement();
        }
        if (Input.GetKeyDown(KeyCode.I))
        {
            tapToPlace.StopPlacement();
        }
    }
}
</code></pre>
</li>
<li><p>In play mode, press the <em>U key</em> to start placing the cube</p>
</li>
<li><p>Press the <em>I key</em> to stop the placement</p>
</li>
</ol>
<h2 id="tap-to-place-example-scene">Tap to Place Example Scene</h2>
<p>The Tap to Place example scene consists of 4 placeable objects, each with a different configuration. The example scene contains walls to show the surface placement behavior that are disabled by default in the hierarchy. The example scene can be found in the Microsoft.MixedReality.Toolkit.Unity.Examples unity package found on the <a href="https://github.com/Microsoft/MixedRealityToolkit-Unity/releases">Release Page</a>. The scene location is: <em>MRTK.Examples/Demos/Solvers/Scenes/TapToPlaceExample.unity</em></p>
<p><img src="Images/Solver/TapToPlace/TapToPlaceExampleScene.gif" alt="TapToPlaceExampleScene"></p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="README_Solver.html">Solvers</a></li>
<li><a href="SpatialAwareness/SpatialAwarenessGettingStarted.html">Spatial Awareness</a></li>
<li><a href="InputSimulation/InputSimulationService.html">Input Simulation</a></li>
<li><a href="Input/HandTracking.html">Hand Tracking</a></li>
<li><a href="Input/Gaze.html">Gaze</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Microsoft/MixedRealityToolkit-Unity/blob/mrtk_development/Documentation/README_TapToPlace.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
